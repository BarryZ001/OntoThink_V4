OntoThink 系统实施设计文档 (MVP)
1. 项目范围与目标 (Scope & Objectives)
1.1 MVP 核心功能

本次 MVP 旨在验证 OntoThink 的核心理念和技术可行性。我们将专注于以下功能：

思辨图谱生成：用户输入中文问题，系统生成一个包含立场、核心论据和反问的思辨图谱。

基础交互：图谱在画布上可拖拽、缩放，并支持点击节点查看详细信息。

后端 API：提供一个稳定、高效的 API 接口，用于驱动前端图谱的生成和数据获取。

用户界面：一个简洁、直观的 Web 界面，让用户能轻松上手。

1.2 非 MVP 范围

以下功能将在未来版本中实现：

用户登录与账户系统

思维快照与版本控制

实时协作与图谱分享

社区贡献与积分系统

2. 技术栈选择 (Technology Stack)
前端：

框架：React

数据可视化：React Flow (主)，D3.js (辅助)

样式：Tailwind CSS

后端：

框架：Python + FastAPI

模型服务：Hugging Face transformers 库的 pipeline (MVP)，vLLM (未来)

数据库：PostgreSQL (统一)，利用其 JSONB 字段存储图谱数据，同时满足未来的用户和社区管理需求。

模型：

基础模型：Yi-6B/9B 或 Yi-34B

训练环境：Google Colab Pro 或 Kaggle Notebook

部署环境：云服务提供商的 GPU 实例（如 Google Cloud/AWS 的 T4 或 A100 GPU）

3. 实施路线图：模型与系统同步开发
3.1 阶段一：数据与模型训练 (Sprint 1-2)

目标：构建一个可用于微调的种子数据集，并完成第一个版本的模型训练。

任务：

数据格式定义与规范：确定思辨数据的 JSON 格式，包含 question, standpoints, arguments, counter-questions 等字段。制定严格的人工标注规范和质量控制流程。

种子数据集构建 (100-200个实例)：

从哲学书籍、论文、在线百科中手动提取并结构化，作为高质量的种子。

使用 GPT-4 或 Gemini API，利用种子数据进行 Few-shot 提示，生成更多数据。

模型微调：

在 Colab Pro/Kaggle 上配置训练环境，安装 transformers, peft, bitsandbytes。

选择 Yi-6B/9B 模型作为基础，使用 QLoRA 微调技术。

编写训练脚本，使用 Trainer 类，监控训练过程中的损失（loss）。

模型评估：

用未参与训练的测试集评估模型，确保其能生成符合要求的思辨内容。

对模型进行定性分析，并定义定量指标（如立场多样性、论据支持度、反问启发性、逻辑一致性）。

3.2 阶段二：后端 API 与模型集成 (Sprint 3-4)

目标：构建后端 API 服务，并成功将微调后的模型集成，实现图谱生成功能。

任务：

FastAPI 接口开发：

创建 POST /generate_graph 接口，接收用户问题，返回结构化图谱数据。

考虑未来可能的数据存储和检索接口（如 /save_graph, /get_graph/{id}）。

模型集成：

使用 Hugging Face transformers 库的 pipeline 进行简单的模型加载和推理，验证核心功能。

在性能成为瓶颈时，再考虑切换到 vLLM 以提高推理效率。

数据库设计：

使用 PostgreSQL，创建用户表和图谱表。

在图谱表中，使用 JSONB 字段存储图谱的节点和连线数据。

图谱数据处理：

编写逻辑，将模型生成的文本内容解析为前端需要的节点和连线 JSON 格式。

3.3 阶段三：前端界面与用户体验 (Sprint 5-6)

目标：完成 MVP 的前端界面开发，实现核心的画布交互，并与后端 API 对接。

任务：

React 项目搭建：

创建 React 应用，设计简洁的欢迎页和主画布界面。

使用 Tailwind CSS 进行样式开发，确保界面美观且响应式。

画布渲染：

以 React Flow 为主，实现图谱的可视化。

实现节点点击事件，弹出侧边栏，显示节点详细信息。

前后端集成：

在前端编写代码，向后端 POST /generate_graph 接口发送用户问题。

接收后端返回的 JSON 数据，并将其渲染到画布上。

基础用户体验与反馈：

添加加载动画和错误提示。

明确用户反馈的收集渠道（如应用内反馈按钮、问卷）和处理流程。

4. 运营与迭代计划
MVP 发布：一旦核心功能稳定，即可发布 MVP 版本，邀请种子用户进行测试。

数据驱动迭代：**集成分析工具（如 Google Analytics、Mixpanel）**来追踪用户行为，为产品优化提供依据。

社区建设：在未来版本中，提前规划社区的运营策略，例如如何激励用户贡献高质量内容、如何进行内容审核、如何建立社区规范等。

持续模型优化：根据用户反馈和使用数据，不断优化模型训练数据集，定期进行模型微调，提升图谱质量。

